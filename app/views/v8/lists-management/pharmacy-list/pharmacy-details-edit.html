<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'layout-v8.html' %}
<!-- 
  In /views/layout.html you can:
    - change the header and footer 
    - add custom CSS and JavaScript
-->

<!-- Set the page title -->
{% block pageTitle %}
Drug Purchase Price Database (Margin Survey)
{% endblock %}

<!-- For adding a breadcrumb -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}
<nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
   <ol class="nhsuk-breadcrumb__list">
    <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="../../home-page">Home</a></li>
     <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="../lists-dashboard">Manage lists</a></li>
   <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="../pharmacy-list/pharmacy-list">Pharmacy list</a></li>
     <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="../pharmacy-list/25-generate-sample-april">Pharmacies for May 2025</a></li>
     <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="../pharmacy-list/pharmacy-details-may">View details for Anchor Health Pharmacy</a></li>
  </ol>
  <p class="nhsuk-breadcrumb__back">
    <a class="nhsuk-breadcrumb__backlink" href="#">
      <span class="nhsuk-u-visually-hidden">Back to &nbsp;</span>
      Home
    </a>
  </p>
</nav>
{% endblock %}

<!-- For adding a back link -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/back-link -->
{% block outerContent %}
{% endblock %}

<!-- For adding page content -->
<!-- Page layout code can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}



  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">


      
      <!-- Change the page title here -->
     
      <h1 class="nhsuk-heading-xl nhsuk-u-margin-bottom-4">Edit Anchor Health Pharmacy details</h1>

        
     <div class="nhsuk-form-group">
  <label class="nhsuk-label" for="ODS code">
    ODS code
  </label> <input class="nhsuk-input nhsuk-input--width-10" id="ODS code" name="ODS code" type="text" value="YG323">
</div>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="DHID">
    DHID No
  </label> <input class="nhsuk-input nhsuk-input--width-10" id="DHID" name="DHID" type="text" value="9017">
</div>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Pharmacy name">
    Pharmacy name
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Pharmacy name" name="Pharmacy name" type="text" value="Anchor Health Pharmacy">
</div>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Pharmacy type">
    Pharmacy type
  </label> <select class="nhsuk-select" id="Pharmacy type" name="Pharmacy type">
     <option value="Independent"selected>Independent</option>
    <option value="Chain">Chain</option>
  </select>
</div>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Contact name">
    Contact name
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Contact name" name="Contact name" type="text" value="Karen Johnson">
</div>
<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Contact number">
    Contact number
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Contact number" name="Contact number" type="text" value="0191 867 3642">
</div>

<!--div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Mobile number">
    Mobile number
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Mobile number" name="Mobile number" type="text" value="07263549825">
</div-->
<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Email address">
    Email address
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Email address" name="Email address" type="text" value="k.Johnson@aaapharmacy.co.uk">
</div>

<!--div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Second Email address">
    Second email address
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Second Email address" name="Second Email address" type="text" value="customer.service@aaapharmacy.co.uk">
</div-->

<div class="nhsuk-form-group">
  <div class="nhsuk-u-padding-bottom-4">
  <label class="nhsuk-label" for="Address-1">
   Address <span class="nhsuk-u-visually-hidden">Address line 1 of 2</span>
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Address-1" name="Address-1" type="text" value="39-41 Porchester Road">
  </div>
  <label class="nhsuk-label" for="Address-2">
    <span class="nhsuk-u-visually-hidden">Address line 2 of 2</span>
  <input class="nhsuk-input nhsuk-input--width-20" id="Address-2" name="Address-2" type="text" value="Newcastle, NA13 4FG">
</label></div>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Opening hours">
    Opening hours
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Opening hours" name="tOpening hours" type="text" value="9am - 5pm">
</div>

<br>

<h2 class="nhsuk-heading-m">Add additional details</h2>
<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Contact number">
    Contact number (optional)
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Contact number" name="Contact number" type="text" value="07263549825">
</div>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Second Email address">
    Second email address (optional)
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Second Email address" name="Second Email address" type="text" value="customer.service@aaapharmacy.co.uk">
</div>

<br>







<!--add another details button action starts here-->


<!-- Error summary (hidden by default) -->
<div id="error-summary" class="nhsuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" style="display:none;">
  <h2 class="nhsuk-error-summary__title" id="error-summary-title">There is a problem</h2>
  <div class="nhsuk-error-summary__body">
    <ul id="error-list" class="nhsuk-list nhsuk-error-summary__list">
      <!-- Errors will be inserted here -->
    </ul>
  </div>
</div>

<div id="contact-details-container"></div>

<button class="nhsuk-button nhsuk-button--secondary" type="button" onclick="addContactDetail()">
  + Add another contact details
</button>

<script>
  let counter = 0;

  function addContactDetail() {
    const errorSummary = document.getElementById('error-summary');
    const errorList = document.getElementById('error-list');
    errorList.innerHTML = '';
    errorSummary.style.display = 'none';

    const container = document.getElementById('contact-details-container');
    const rows = container.querySelectorAll('.contact-row');
    const lastRow = rows[rows.length - 1];

    if (lastRow) {
      const labelInput = lastRow.querySelector('.label-input');
      const valueInput = lastRow.querySelector('.value-input');
      const label = labelInput.value.trim();
      const value = valueInput.value.trim();

      let errors = [];

      // Remove any previous error states
      clearErrorState(labelInput);
      clearErrorState(valueInput);

      if (!label) {
        showFieldError(labelInput, 'Enter a number for the contact detail');
        errors.push({ text: 'Enter a number for the contact detail', href: `#${labelInput.id}` });
      }

      if (!value) {
        showFieldError(valueInput, 'Enter an email address for the contact detail');
        errors.push({ text: 'Enter an email address for the contact detail', href: `#${valueInput.id}` });
      }

      if (errors.length > 0) {
        errors.forEach(err => {
          const li = document.createElement('li');
          li.innerHTML = `<a href="${err.href}">${err.text}</a>`;
          errorList.appendChild(li);
        });
        errorSummary.style.display = 'block';
        errorSummary.focus();
        return;
      }
    }

    const row = document.createElement('fieldset');
    row.className = 'contact-row nhsuk-fieldset';
    row.style.marginBottom = '24px';

    row.innerHTML = `
      <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--m">
        Additional contact detail ${counter + 1}
      </legend>

      <div class="nhsuk-form-group" id="group-label-${counter}">
        <label class="nhsuk-label" for="contact-label-${counter}">
          Contact number
        </label>
        <span class="nhsuk-error-message" id="error-contact-label-${counter}" style="display:none;"></span>
        <input class="nhsuk-input nhsuk-input--width-20 label-input" id="contact-label-${counter}" name="contact-label-${counter}" type="text"
               oninput="clearErrorState(this)">
      </div>

      <div class="nhsuk-form-group" id="group-value-${counter}">
        <label class="nhsuk-label" for="contact-value-${counter}">
          Email address
        </label>
        <span class="nhsuk-error-message" id="error-contact-value-${counter}" style="display:none;"></span>
        <input class="nhsuk-input nhsuk-input--width-20 value-input" id="contact-value-${counter}" name="contact-value-${counter}" type="text"
               oninput="clearErrorState(this)">
      </div>

      <a href="#" class="nhsuk-action-link" onclick="removeRow(this); return false;">Remove</a>
    `;

    container.appendChild(row);
    counter++;
  }

  function removeRow(link) {
    link.closest('.contact-row').remove();
  }

  function showFieldError(input, message) {
    const group = input.closest('.nhsuk-form-group');
    const errorMsg = group.querySelector('.nhsuk-error-message');
    errorMsg.textContent = message;
    errorMsg.style.display = 'block';
    input.classList.add('nhsuk-input--error');
    group.classList.add('nhsuk-form-group--error');
  }

  function clearErrorState(input) {
    const group = input.closest('.nhsuk-form-group');
    const errorMsg = group.querySelector('.nhsuk-error-message');
    if (errorMsg) errorMsg.style.display = 'none';
    input.classList.remove('nhsuk-input--error');
    group.classList.remove('nhsuk-form-group--error');
  }
</script>


<br>
<br>


<!--add another details button action ends here-->







<h2 class="nhsuk-heading-m">Collection details</h2>

<div class="nhsuk-form-group">

  <fieldset class="nhsuk-fieldset" aria-describedby="Collection-date" role="group">
    <legend class="nhsuk-fieldset__legend">
      <p class="nhsuk-fieldset__heading">
       Collection date
      </p>
    </legend>
    <div class="nhsuk-hint" id="Collection-date">
      For example, 15 3 2025
    </div>
    <div class="nhsuk-date-input" id="Collection date">
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for=" Collection date-day">
            Day
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id=" Collection date-day" name=" Collection date[day]" type="text" inputmode="numeric" value="28">
        </div>
      </div>
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for=" Collection date-month">
            Month
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id=" Collection date-month" name=" Collection date[month]" type="text" inputmode="numeric" value="5">
        </div>
      </div>
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for=" Collection date-year">
            Year
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id=" Collection date-year" name=" Collection date[year]" type="text" inputmode="numeric" value="2025">
        </div>
      </div>
    </div>
  </fieldset>
</div>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="TNT shipment number">
    TNT shipment number
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="TNT shipment number" name="TNT shipment number" type="text" value="AKJ123497785WP">
</div>

<br>

<h2 class="nhsuk-heading-m">Return details</h2>

<div class="nhsuk-form-group">

  <fieldset class="nhsuk-fieldset" aria-describedby="Collection-date" role="group">
    <legend class="nhsuk-fieldset__legend">
      <p class="nhsuk-fieldset__heading">
       Return date
      </p>
    </legend>
    <div class="nhsuk-hint" id="Collection-date">
      For example, 15 3 2025
    </div>
    <div class="nhsuk-date-input" id="Collection date">
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for=" Collection date-day">
            Day
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id=" Collection date-day" name=" Collection date[day]" type="text" inputmode="numeric" value="13">
        </div>
      </div>
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for=" Collection date-month">
            Month
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id=" Collection date-month" name=" Collection date[month]" type="text" inputmode="numeric" value="6">
        </div>
      </div>
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for=" Collection date-year">
            Year
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id=" Collection date-year" name=" Collection date[year]" type="text" inputmode="numeric" value="2025">
        </div>
      </div>
    </div>
  </fieldset>
</div>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="TNT shipment number">
    TNT shipment number
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="TNT shipment number" name="TNT shipment number" type="text" value="FHV123497785GH">
</div>

<br>

<h2 class="nhsuk-heading-m">Other details</h2>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="status">
    Status
  </label> <select class="nhsuk-select" id="status" name="status">
    <option value="Blank"></option>
    <option value="Letter sent">Letter sent</option>
    <option value="Confirm participation" >Confirm participation</option>
    <option value="To arrange collection" >To arrange collection</option>
     <option value="Collection arranged" >Collection arranged</option>
<option value="Invoices on site" >Invoices on site</option>
      <option value="Invoices received via email" >Invoices received via email</option>
      <option value="Invoices returned" selected>Invoices returned</option>
     <option value="Not participating" >Not participating</option>
  </select>
</div>

<div class="nhsuk-form-group">
<fieldset class="nhsuk-fieldset" aria-describedby="Date-invoices-arrived" role="group">
    <legend class="nhsuk-fieldset__legend">
      <p class="nhsuk-fieldset__heading">
       Date invoices arrived
      </p>
    </legend>
    <div class="nhsuk-hint" id="Date-invoices-arrived">
      For example, 15 3 2025
    </div>
    <div class="nhsuk-date-input" id="Date-invoices-arrived">
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for="Date-invoices-arrived-day">
            Day
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="Date-invoices-arrived-day" name="Date-invoices-arrived[day]" type="text" inputmode="numeric" value="10">
        </div>
      </div>
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for="Date-invoices-arrived-month">
            Month
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="Date-invoices-arrived-month" name="Date-invoices-arrived[month]" type="text" inputmode="numeric" value="6">
        </div>
      </div>
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for="Date-invoices-arrived-year">
            Year
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="Date-invoices-arrived-year" name="Date-invoices-arrived[year]" type="text" inputmode="numeric" value="2025">
        </div>
      </div>
    </div>
  </fieldset>
</div>

<div class="nhsuk-form-group">
<fieldset class="nhsuk-fieldset" aria-describedby="Date-invoices-returned" role="group">
    <!--legend class="nhsuk-fieldset__legend">
      <p class="nhsuk-fieldset__heading">
       Date invoices returned
      </p>
    </legend>
    <div class="nhsuk-hint" id="Date-invoices-returned">
      For example, 15 3 2025
    </div>
    <div class="nhsuk-date-input" id="Date-invoices-returned">
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for="Date-invoices-returned-day">
            Day
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="Date-invoices-returned-day" name="Date-invoices-returned[day]" type="text" inputmode="numeric" value="15">
        </div>
      </div>
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for="Date-invoices-returned-month">
            Month
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="Date-invoices-returned-month" name="Date-invoices-returned[month]" type="text" inputmode="numeric" value="6">
        </div>
      </div>
      <div class="nhsuk-date-input__item">
        <div class="nhsuk-form-group">
          <label class="nhsuk-label nhsuk-date-input__label" for="Date-invoices-returned-year">
            Year
          </label> <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="Date-invoices-returned-year" name="Date-invoices-returned[year]" type="text" inputmode="numeric" value="2025">
        </div-->
      </div>
    </div>
  </fieldset>
</div>


<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Last-updated-by">
    Last updated by
  </label> <input class="nhsuk-input nhsuk-input--width-20" id="Last-updated-by" name="Last-updated-by" type="text" value="Dianna Green">
</div>




<br>


<details class="nhsuk-details nhsuk-expander">
  <summary class="nhsuk-details__summary">
    <span class="nhsuk-details__summary-text">
      Comments
    </span>
  </summary>
  <div class="nhsuk-details__text">

   <p class="nhsuk-body">
                              <i>09 June 2025 13:52:43 added by Diana Green</i>
                            <br>
                              <b>Pharmacy confirmed via email on 12 June 2025 that invoices were securely packaged with return samples.</b> </p>
                              <hr>
                               <i>08 June 2025 10:12:03 added by Diana Green</i>
                            <br>
                              <b>Received confirmation from pharmacy that all requested items were included in return package.</b> </p>
  </div>
</details>

<br>

<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="Comments">
    Add comments (optional)
  </label>
  <div class="nhsuk-hint" id="example-hint">
   Provide more details in the box if needed.
  </div> <textarea class="nhsuk-textarea" id="Comments" name="Comments" rows="5" aria-describedby="Comments"></textarea>
</div>
      
       

     <!-- End of content -->
 <a href="pharmacy-details-confirm" class="nhsuk-button" >Update details</a>
 <a href="pharmacy-details-may" class="nhsuk-button nhsuk-button--secondary">Cancel</a>

    </div>
  </div>
{% endblock %}
