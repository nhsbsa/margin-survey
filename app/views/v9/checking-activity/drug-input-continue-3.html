<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'layout-v9.html' %}
<!-- 
  In /views/layout.html you can:
    - change the header and footer 
    - add custom CSS and JavaScript
-->

<!-- Set the page title -->
{% block pageTitle %}
Drug Purchase Price Database (Margin Survey)
{% endblock %}

<!-- For adding a breadcrumb -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}
<nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
  <ol class="nhsuk-breadcrumb__list">
    
   <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="continue-2">Go back to supplier list</a></li>
  </ol>
  <p class="nhsuk-breadcrumb__back">
    <a class="nhsuk-breadcrumb__backlink" href="#">
      <span class="nhsuk-u-visually-hidden">Back to &nbsp;</span>
      Home
    </a>
  </p>
</nav>
{% endblock %}

<!-- For adding a back link -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/back-link -->
{% block outerContent %}
{% endblock %}

<!-- For adding page content -->
<!-- Page layout code can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}


  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

      
      <!-- Change the page title here -->
      <span class="nhsuk-caption-xl">June 2025 - Checking activity</span>
      <h1 class="nhsuk-heading-xl">View a drug supplied by Altera Digital Health</h1>

     <div class="nhsuk-action-link">
  <a class="nhsuk-action-link__link" href="drug-image-3" target="_blank">
    <svg class="nhsuk-icon nhsuk-icon__arrow-right-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="36" height="36">
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"></path>
    </svg>
    <span class="nhsuk-action-link__text">Open document viewer and check invoice (opens in a new tab)</span>
  </a>
</div>

   

      <form id="myForm">


<div style="display:flex; gap: 35px;"> 
<div class="nhsuk-form-group">
     <label 
     class="nhsuk-label" 
     for="Invoice ID"
      for="previous" 
      style="user-select: none;">

      <!-- Hidden icon, will be shown conditionally -->
      <div id="tell-message" class="nhsuk-u-visually-hidden" aria-live="tell-reference"></div>

        <span id="previous-icon" style=" 
        display: none;
        margin-right: 5px;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: black;
        color: white;
        text-align: center;
        line-height: 30px;
        font-weight: bold;
        font-size: 20px;
        user-select: none;
        vertical-align: middle;
      " aria-hidden="true">!</span>


    <span id="reference-text" style="font-weight: normal;">Invoice and drug reference number</span>
    </label>

    <div class="nhsuk-input__wrapper">
    <input 
    class="nhsuk-input nhsuk-input--width-10" 
    id="Invoice ID" 
    name="Invoice ID" 
    type="text" 
    style="width: 300px;" 
    value="143.22">

 </div>
</div>

<!--<div class="nhsuk-form-group" style="display: flex; align-items: center; gap: 1rem;">
  <div>
    <label class="nhsuk-label" for="Invoice ID">
      Invoice ID
    </label>
    <input class="nhsuk-input nhsuk-input--width-10" id="Invoice ID" name="Invoice ID" type="text" style="width: 300px;" value="123.143">
  </div>

  <div class="nhsuk-checkboxes__item" style="display: flex; align-items: center; gap: 0.5rem; margin-top: 32px;">
    <input class="nhsuk-checkboxes__input" id="PI" name="PI" type="checkbox" value="PI" checked>
    <label class="nhsuk-label nhsuk-checkboxes__label" for="PI">
      Is this drug a PI?
    </label>
  </div>
</div> -->

  <div class="nhsuk-form-group">
    <label class="nhsuk-label" for="ConcesCatC">
      Conces/Cat C
    </label>
    <select class="nhsuk-select" id="ConcesCatC" name="ConcesCatC">
      <option value="1" selected>Cat C</option>
      <option value="2">Conces</option>
    </select>
  </div>
</div>

    <div class="nhsuk-checkboxes__item" style="display: flex; align-items: center; gap: 0.5rem; margin-top: 10px;">
    <input class="nhsuk-checkboxes__input" id="PI" name="PI" type="checkbox" value="PI" checked>
    <label class="nhsuk-label nhsuk-checkboxes__label" for="PI">
      Is this drug a PI?
    </label>
 
</div>

<br>

    <div class="nhsuk-form-group">
                  <label class="nhsuk-label" for="autocomplete-input">
                    Drug name
                  </label>
                  <div class="nhsuk-hint" id="example-with-hint-text-hint">
                  </div>
                  <input class="nhsuk-input nhsuk-u-width-full" id="autocomplete-input" name="Drug" type="text" autocomplete="off" list="Drug" placeholder="Enter a drug name" value="Cetirizine 10 mg tablet">
                  <ul class="nhsuk-list" id="suggestions-list" hidden></ul>
    </div>
                <datalist id="Drug">
                  <option value="Amlodipine 5 mg tablet"></option>
                  <option value="Amoxicillin 500 mg tablet"></option>
                  <option value="Atorvastatin 20 mg tablet"></option>
                  <option value="Cetirizine 10 mg tablet"></option>
                  <option value="Ibuprofen 400 mg tablet"></option>
                  <option value="Bisoprolol Tab 10mg (AAH/HX)"></option>
                  <option value="Paracetamol 500 mg tablet"></option>
                  <option value="Salbutamol 2 mg tablet "></option>
                </datalist>
    

 <div class="nhsuk-checkboxes nhsuk-checkboxes--conditional">
  <div class="nhsuk-checkboxes__item" style="display: flex; align-items: center; gap: 0.5rem; margin-top: 30px;" >
    <input class="nhsuk-checkboxes__input"
           id="brand-name-1"
           name="brand-name-checkbox"
           type="checkbox"
           value="brand-name"
           aria-controls="brand-name-generic-name-1"
           aria-expanded="false"
           onclick="toggleConditional(this)" value="" checked>
    <label class="nhsuk-label nhsuk-checkboxes__label" for="brand-name-1">
      Select if the drug has another brand name or generic name (optional)
    </label>
  </div>
  <div class="nhsuk-checkboxes__conditional nhsuk-checkboxes__conditional" id="brand-name-generic-name-1">
    <div class="nhsuk-form-group" style="margin-top: 25px;">
      <label class="nhsuk-label" for="brand-name">
        Brand name / Generic name
      </label>
      <input class="nhsuk-input nhsuk-u-width-two-thirds" id="brand-name" name="brand-name" type="text" value="Aspire">
    </div>
  </div>
</div>

<script>
  function toggleConditional(checkbox) {
    const conditional = document.getElementById('brand-name-generic-name-1');
    if (checkbox.checked) {
      conditional.classList.remove('nhsuk-checkboxes__conditional--hidden');
      checkbox.setAttribute('aria-expanded', 'true');
    } else {
      conditional.classList.add('nhsuk-checkboxes__conditional--hidden');
      checkbox.setAttribute('aria-expanded', 'false');
    }
  }
</script>

<div>
<div style="display: inline-block; margin-right: 10px;">
    <div class="nhsuk-form-group">
      <label class="nhsuk-label" for="Pack size">
        Pack size
      </label>
      <div>
      <input class="nhsuk-input nhsuk-input--width-5" id="Pack size" name="Pack size" type="text" value="10">
      </div>
    </div>
</div>    

<div style="display: inline-block; margin-right: 10px;">    
 <div class="nhsuk-form-group" style="margin-top: 25px;">      
      <label class="nhsuk-label" for="Number of packs">
        Number of packs
      </label>
      <div>
        <input class="nhsuk-input nhsuk-input--width-5" id="Number of packs" name="Number of packs" type="text" value="11">
       </div>
  </div>
</div>
</div>

<!--Price per pack-->
  <div style="display: inline-block; margin-right: 10px;">
  <div class="nhsuk-form-group">
    <label class="nhsuk-label" for="price-per-pack">
      Price per pack
    </label>
    <div class="nhsuk-input__wrapper">
      <div class="nhsuk-input__prefix" aria-hidden="true">£</div>
      <input 
        class="nhsuk-input nhsuk-input--width-5" 
        id="price-per-pack" 
        name="price-per-pack" 
        type="text" 
        value="0.25"
      >
    </div>
  </div>
</div>


<!--Total price -->
<div style="display: inline-block; margin-right: 10px;">
  <div class="nhsuk-form-group">
    <label class="nhsuk-label" id="invoice-price-label" for="invoice-price">
      Invoice price
    </label>
    <div class="nhsuk-input__wrapper">
      <div class="nhsuk-input__prefix" aria-hidden="true">£</div>
      <input class="nhsuk-input nhsuk-input--width-5" id="invoice-price" name="invoice-price" type="text" value="2.75">
    </div>
  </div>
</div>

<!--Difference-->
<div style="display: inline-block; margin-right: 10px;">
  <div class="nhsuk-form-group">
    <label 
      class="nhsuk-label" 
      id=" difference-label" 
      for="difference" 
      style="user-select: none;">
    
      <!-- Hidden icon, will be shown conditionally -->
      <div id="warning-message" class="nhsuk-u-visually-hidden" aria-live="warning-difference"></div>

      <span id="warning-icon" style=" 
        display: none;
        margin-right: 5px;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: black;
        color: white;
        text-align: center;
        line-height: 30px;
        font-weight: bold;
        font-size: 20px;
        user-select: none;
        vertical-align: middle;
      " aria-hidden="true">!</span>
      <span id="difference-text" style="font-weight: normal;">Difference</span>
    </label>
    <div class="nhsuk-input__wrapper">
      <div class="nhsuk-input__prefix" aria-hidden="true">£</div>
      <input class="nhsuk-input nhsuk-input--width-5" id="difference" name="difference" type="text" value="0" disabled>
    </div>
  </div>
</div>

<!--Check total-->
<div style="display: inline-block;">
  <div class="nhsuk-form-group">
    <label class="nhsuk-label" for="check-total">
      Check total
    </label>
    <div class="nhsuk-input__wrapper">
      <div class="nhsuk-input__prefix" aria-hidden="true">£</div>
      <input class="nhsuk-input nhsuk-input--width-5" id="check-total" name="check-total" type="text" value="2.75" disabled>
    </div>
  </div>
</div>


<script>
  
  const perpackInput = document.getElementById('price-per-pack');
  const priceInput = document.getElementById('invoice-price');
  const warningIcon = document.getElementById('warning-icon');
  const differenceInput = document.getElementById('difference');
  const differenceText = document.getElementById('difference-text');
  const checkInput = document.getElementById('check-total');
  const warningMessage = document.getElementById('warning-message');

  
   // Price per pack
   perpackInput.addEventListener('input', () => {
    if (perpackInput.value.trim() === "1") {
      // Show visual warning
      differenceInput.value = "0";
      checkInput.value = "11";

    } else {
      // Reset visual
      warningIcon.style.display = "none";
      differenceInput.value = "0";
      differenceText.style.fontWeight = "normal";
      checkInput.value = "2.75";
      warningMessage.textContent = "";
      warningMessage.classList.add('nhsuk-u-visually-hidden');
    }
  });

  priceInput.addEventListener('input', () => {
    if (priceInput.value.trim() === "1") {
      // Show visual warning
      warningIcon.style.display = "inline-block";
      differenceInput.value = "1.75";
      differenceInput.style.fontWeight = "bold";
      differenceText.style.fontWeight = "bold";
      checkInput.value = "2.75";

     
    } else {
      // Reset visual and screen reader warnings
      warningIcon.style.display = "none";
      differenceInput.value = "0";
      differenceText.style.fontWeight = "normal";
      checkInput.value = "2.75";
      warningMessage.textContent = "";
      warningMessage.classList.add('nhsuk-u-visually-hidden');
    }
  });
</script>

<!--Javascript ends-->



<div class="nhsuk-form-group">
  <label class="nhsuk-label" for="autocomplete-input 2">
    Generic manufacturer
  </label>
  <div class="nhsuk-hint" id="example-with-hint-text-hint">
  If name does not appear <a href="../lists-management/manufacturer-list/add-manufacturer" class="nhsuk-link">add manufacturer</a>
  </div>

  <input class="nhsuk-input nhsuk-u-width-full" id="autocomplete-input 2" name="Generic manufacturer" type="text" autocomplete="off" list="Generic manufacturer" placeholder="" value="Johnson & Johnson Company">
  <ul class="nhsuk-list" id="suggestions-list" hidden></ul>
</div>
<datalist id="Generic manufacturer">
  <option value="AbbVie"></option>
  <option value="Bristol-Myers Squibb"></option>
  <option value="GSK"></option>
  <option value="AAH"></option>
</datalist>





  

           
                            <div class="nhsuk-form-group" style="padding-left: 00px; padding-top: 10px;">
                            <a href="confirmation-supplier" class="nhsuk-button">Finished checking supplier</a> 
                                <a href="drug-input-updated" class="nhsuk-button nhsuk-button--secondary">Update information</a>

                            <a href="drug-input" class="nhsuk-button nhsuk-button--secondary" >Manually add a drug</a>
                            <a href="delete" class="nhsuk-button nhsuk-button--warning">Delete drug</a>
                          </div>

  <p><a href="" type="button" onclick="clearFields()">Clear all fields</a></p>

</form>


   <script>
    function clearFields() {
        document.getElementById('myForm').reset();
    }
</script>

 <p> You are on page 145 of 145</p>
                     
                         
        <div class="nhsuk-checkboxes" style="margin-left: -38px;">
        <div class="nhsuk-checkboxes__item">
          <input class="nhsuk-input nhsuk-input--width-4" id="example-2" name="example">
          <label class="nhsuk-label nhsuk-checkboxes__label" for="example-2">
            <a href="drug-input-continue-1-old">Go to page</a>
          </label>
        </div>
      </div>
      <br>


      <!--search-->

      <details class="nhsuk-details">
        <summary class="nhsuk-details__summary">
          <span class="nhsuk-details__summary-text">
            Search for a drug entry
          </span>
        </summary>
        <div class="nhsuk-details__text">

        <div class="nhsuk-form-group">
          <label class="nhsuk-label" for="drug-search">
            Enter drug name to search for previously entered drugs.
          </label>
          <div class="nhsuk-hint">
            For example Bisoprolol
          </div>
          <input 
            class="nhsuk-input nhsuk-input--width-10" 
            id="drug-search" 
            name="drug" 
            type="text">
        </div>

        <div class="nhsuk-form-group">
          <label class="nhsuk-label" for="invoice-search">
            Enter invoice reference number to search for previously entered drugs.
          </label>
          <div class="nhsuk-hint">
            For example 128
          </div>
          <input 
            class="nhsuk-input nhsuk-input--width-10" 
            id="invoice-search" 
            name="invoice" 
            type="text">
        </div>

        <a href="drug-input-search-result" class="nhsuk-button" style="margin-top: 20px;">
          Search
        </a>

        
         <a href="drug-input-search-result" class="nhsuk-button nhsuk-button--secondary" style="margin-top: 20px;">
           Back to last search result
        </a>

      
        </div>
      </details>

      <!--search-->

<!---pagination--->

<nav class="nhsuk-pagination" role="navigation" aria-label="Pagination">
  <ul class="nhsuk-list nhsuk-pagination__list">
    <li class="nhsuk-pagination-item--previous">
      <a class="nhsuk-pagination__link nhsuk-pagination__link--prev" href="drug-input-continue-2">
        <span class="nhsuk-pagination__title">Previous</span>
        <span class="nhsuk-u-visually-hidden">:</span>
        <span class="nhsuk-pagination__page">Page 144</span>
        <svg class="nhsuk-icon nhsuk-icon--arrow-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" focusable="false" aria-hidden="true">
          <path d="M10.7 6.3c.4.4.4 1 0 1.4L7.4 11H19a1 1 0 0 1 0 2H7.4l3.3 3.3c.4.4.4 1 0 1.4a1 1 0 0 1-1.4 0l-5-5A1 1 0 0 1 4 12c0-.3.1-.5.3-.7l5-5a1 1 0 0 1 1.4 0Z" />
        </svg>

      </a>
    </li>
  </ul>
</nav>

<!---pagination ends--->

    </div>
  </div>


{% endblock %}
