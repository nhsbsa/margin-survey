<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'layout-v9.html' %}
<!-- 
  In /views/layout.html you can:
    - change the header and footer 
    - add custom CSS and JavaScript
-->

<!-- Set the page title -->
{% block pageTitle %}
Drug Purchase Price Database (Margin Survey)
{% endblock %}

<!-- For adding a breadcrumb -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}
{% endblock %}

<!-- For adding a back link -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/back-link -->
{% block outerContent %}
{% endblock %}

<!-- For adding page content -->
<!-- Page layout code can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}


{{ backLink({
  "href": "javascript:history.go(-1)",
  "text": "Go back"
  }) }}


  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

<br>

    <!-- Error -->

     <div class="nhsuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1">
        <h2 class="nhsuk-error-summary__title" id="error-summary-title">
            There is a problem
        </h2>
        <div class="nhsuk-error-summary__body">
            
            <ul class="nhsuk-list nhsuk-error-summary__list" role="list">
            <li> <a href="#example-error-1">There are no previously generated reports.</a></li>
            <li> <a href="#example-error-2">Select a month</a></li>
            <li> <a href="#example-error-3">Select a year</a></li>
            <li> <a href="#example-error-4">Month and year of report must be in the past</a></li>
            <li> <a href="#example-error-5">Month of report must be a previous month</a></li>
            <li> <a href="#example-error-6">Month and year of report must be 2 years ago or less</a></li>       
            </ul>

        </div>
     </div>

<!-- Error summary -->



      <!-- Change the page title here -->

      <h1 class="nhsuk-heading-xl">Get monthly margin survey data for the Department of Health and Social Care (DHSC)</h1>

      <p>Generate monthly extracts of the drug purchase price (margin survey) data to send to DHSC.</p>
<br>
        <div class="nhsuk-form-group nhsuk-form-group--error">

            <fieldset class="nhsuk-fieldset" aria-describedby="example-hint" role="group">
                <legend class="nhsuk-fieldset__legend nhsuk-label--l">
                <h2 class="nhsuk-fieldset__heading">
                    Select a month and year
                </h2>
                </legend>
                <div class="nhsuk-hint" id="example-hint">
                Choose any previous month, and year. Data cannot be extracted for the current month.
                </div>
<br>

                <span class="nhsuk-error-message" id="dob-day-error-error">
                <span class="nhsuk-u-visually-hidden">Error:</span> Date of birth must be in the past
                </span>


                <!-- Date input fields for month and year -->                
                <div style="display: flex; gap: 1rem; align-items: flex-end; flex-wrap: wrap;">
                    <div>
                        <label class="nhsuk-label nhsuk-date-input__label" for="dob-day-error-month">
                            Month
                        </label>
                        <select class="nhsuk-select nhsuk-date-input__input nhsuk-input--width-4 nhsuk-input--error" id="dob-day-error-month" name="dob-day-error[month]" >
                            <option value="Select">Select a month</option>
                            <option value="01">January</option>
                            <option value="02">February</option>
                            <option value="03">March</option>
                            <option value="04">April</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">August</option>
                            <option value="09">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>
                    <div>
                        <label class="nhsuk-label nhsuk-date-input__label" for="example-year">
                            Year
                        </label>
                        <select class="nhsuk-select nhsuk-date-input__input nhsuk-input--width-4" id="example-year" name="example[year]" type="text" inputmode="numeric">
                            <option value="Select">Select a year</option>
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                            <option value="2028">2028</option>
                            <option value="2029">2029</option>
                            <option value="2030">2030</option>
                        </select>
                    </div>
                    <div>
                        <a href="download-monthly-extract" class="nhsuk-button" style="margin: 0;">Generate reports</a>
                    </div>
                </div>
            </fieldset>

        </div>


<br>

        <table class="nhsuk-table">
        <h2 class="nhsuk-table__caption--m">Generated reports</h2>
        <p class="nhsuk-table__description">This table shows all previously generated reports.</p>
        <thead class="nhsuk-table__head">
            <tr>
            <th scope="col" class="nhsuk-table__header">Month</th>
            <th scope="col" class="nhsuk-table__header">File</th>
            <th scope="col" class="nhsuk-table__header">Date generated</th>            
            <th scope="col" class="nhsuk-table__header">Actions</th>
            </tr>
        </thead>
        <tbody class="nhsuk-table__body">
            <tr class="nhsuk-table__row">
            <td class="nhsuk-table__cell nhsuk-u-text-break-word">June 2025</td>
            <td class="nhsuk-table__cell nhsuk-u-text-break-word">report-june-2025.xlsx</td>
            <td class="nhsuk-table__cell nhsuk-u-text-break-word">01 June 2025 13:34</td>
            <td class="nhsuk-table__cell nhsuk-u-text-break-word"><a href="download-monthly-extract">Download</a>
            </td>
            </tr>
        </tbody>
        </table>

<br>     
     <!-- End of content -->

    </div>
  </div>
{% endblock %}
